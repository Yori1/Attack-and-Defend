@model List<Party>
@{
    var model = Model;
    int partiesDisplayed = 0;
}

<div class="informationBlock hasNavBar">
    <div class="container">
        <br />
        <form asp-action="AddParty" asp-controller="Party">
            <input name="partyName" type="text" />
            <input type="submit" value="Add party" />
        </form>
        @if (Model.Count() == 0)
        {
            <br />
            <div>You don't have any parties.</div>
        }
        @foreach (Party party in model)
        {
            int partyNumber = partiesDisplayed + 1;
            <h1>#@partyNumber @party.Name</h1>
            foreach (Character character in party.Characters)
            {
                <div> Name: @character.Name</div>
                <div>
                    Class: @character.GetJobName()

                    Health: @character.Health
                    Attack: @character.Attack
                    Physical Defense: @character.PhysicalDefense
                    Magic Defense: @character.MagicDefense
                </div>
                <br />
            }
            partiesDisplayed = partiesDisplayed + 1;

            if (party.Characters.Count() < 5)
            {
                <a asp-controller="Party" asp-action="AddCharacter" asp-route-partyIdToAddTo="@party.Id">Add new character to @party.Name</a>
            }
        }

    </div>
    </div>