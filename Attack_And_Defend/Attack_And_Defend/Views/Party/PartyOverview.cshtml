@model List<Party>
@{
    var model = Model;
    int partiesDisplayed = 0;
}

<div class="informationBlock hasNavBar">
    <div class="container">
        <br />
        <form asp-action="AddParty" asp-controller="Party">
            <input name="partyName" type="text" />
            <input type="submit" value="Add party" />
        </form>
        @if (Model.Count() == 0)
        {
            <br />
            <div>You don't have any parties.</div>
        }
        @foreach (Party party in model)
        {
            int partyNumber = partiesDisplayed + 1;
            <h1>#@partyNumber @party.Name</h1>
            <div class="row">

                @for (int x = 0; x < 5; x++)
                {
                    if (x < party.Characters.Count())
                    {
                        Character character = party.Characters[x];
                        <div class="col-md-2">
                            <b>Name: @character.Name</b>
                            <br />Class: @character.JobNumber.ToString()
                            <br />Health: @character.Health
                            <br />Attack: @character.Attack
                            <br />Physical Defense: @character.PhysicalDefense
                            <br />Magic Defense: @character.MagicDefense
                        </div>
                    }

                    else
                    {
                        <div class="col-md-2">
                            <br /><b>Empty</b>
                            <br />
                            @if (party.Characters.Count() < 5)
                            {
                                <a asp-controller="Party" asp-action="AddCharacter" asp-route-partyIdToAddTo="@party.Id">Add new character to @party.Name</a>
                            }
                        </div>
                    }
                }
                                    
                        <div class="col-md-2"></div>
            </div>

            partiesDisplayed = partiesDisplayed + 1;


        }

    </div>
</div>